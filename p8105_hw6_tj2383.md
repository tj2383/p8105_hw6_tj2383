p8105\_hw6\_tj2383
================
Tanvi Jain
11/16/2018

### Problem 1

Importing the homicide dataset from the Washington Post.

``` r
homicide_data = read.csv("./data/homicide-data.csv")
```

In this code chunk I create a `city_state` variable by combining the `city` and `state` variables and a binary variable indicating whether the homicide is solved. I omitted the cities Dallas, TX; Phoenix, AZ; and Kansas City, MO – these don’t report victim race. I also omitted Tulsa, AL – this is a data entry mistake. Next I modifiy `victim_race` to have categories white and non-white, with white as the reference category. Be sure that victim\_age is numeric.

``` r
homicide_data_clean = 
  homicide_data %>% 
  mutate(city_state = paste(city, state, sep = ", ")) %>% 
  select(-city, -state) %>% 
  mutate(case_resolution = as.numeric(disposition == "Closed by arrest")) %>% 
  filter(city_state != "Dallas, TX" & city_state != "Phoenix, AZ" & city_state != "Kansas City, MO" & city_state != "Tulsa, AL") %>% 
  
  mutate(binary_race = case_when(
    victim_race == "Asian" ~ "non-white",
    victim_race == "Black" ~ "non-white",
    victim_race == "Hispanic" ~ "non-white",
    victim_race == "Other" ~ "non-white",
    victim_race == "Unknown" ~ "non-white",
    victim_race == "White" ~ "white"),
    
    victim_race = factor(binary_race, levels = c("white", "non-white")),
    victim_age = as.numeric(as.character(victim_age))
  )
```

    ## Warning in evalq(as.numeric(as.character(victim_age)), <environment>): NAs
    ## introduced by coercion

In this code chunk I use the glm function to fit a logistic regression with resolved vs unresolved as the outcome and victim age, sex and race (as just defined) as predictors for Baltimore, MD. I then saved the output of glm as an R object; applied the broom::tidy to this object; and obtained the estimate and confidence interval of the adjusted odds ratio for solving homicides comparing black victims to white victims, keeping all other variables fixed.

``` r
fit_logistic_baltimore = 
  homicide_data_clean %>% 
  filter(city_state == "Baltimore, MD") %>% 
  glm(case_resolution ~ victim_age + victim_race + victim_sex, data = ., family = binomial()) 
```
